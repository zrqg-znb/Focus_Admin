## **TScan 子应用开发方案**

我已经为您完成了 TScan 子应用的核心开发工作，涵盖了从后端模型设计、Docker 执行逻辑到前端审批流的全套功能。

### **1. 后端实现 (Django Ninja)**
- **数据模型**: 在 [models.py](file:///Users/zrq/CodeSpace/PythonProjects/Focus_Admin/backend-django/apps/tscan/models.py) 中定义了项目配置、扫描任务、扫描结果及屏蔽申请单。
- **业务逻辑**: 在 [services.py](file:///Users/zrq/CodeSpace/PythonProjects/Focus_Admin/backend-django/apps/tscan/services.py) 中实现了：
    - **Docker 模拟执行**: 封装了拉取镜像、挂载目录、执行扫描的流程。
    - **结果解析与指纹**: 自动解析 TScan 输出，并为每个缺陷生成唯一指纹，确保代码微调后屏蔽状态依然有效。
    - **审批流控制**: 处理“申请屏蔽”与“指定人审批”的状态流转。
- **API 接口**: 在 [api.py](file:///Users/zrq/CodeSpace/PythonProjects/Focus_Admin/backend-django/apps/tscan/api.py) 中暴露了项目 CRUD、手动触发扫描、结果查询及审批操作接口。

### **2. 前端实现 (Vue3 + VbenAdmin)**
- **API 封装**: 在 [tscan/index.ts](file:///Users/zrq/CodeSpace/PythonProjects/Focus_Admin/web/apps/web-ele/src/api/tscan/index.ts) 中定义了所有前端调用的接口。
- **项目管理**: [project/index.vue](file:///Users/zrq/CodeSpace/PythonProjects/Focus_Admin/web/apps/web-ele/src/views/tscan/project/index.vue) 支持配置仓库、编译命令及镜像，并可一键启动扫描。
- **结果分析**: [result/index.vue](file:///Users/zrq/CodeSpace/PythonProjects/Focus_Admin/web/apps/web-ele/src/views/tscan/result/index.vue) 实时展示扫描缺陷，支持多选并提交屏蔽申请。
- **审批中心**: [audit/index.vue](file:///Users/zrq/CodeSpace/PythonProjects/Focus_Admin/web/apps/web-ele/src/views/tscan/audit/index.vue) 供审批人查看理由并执行“通过/驳回”操作。

### **3. 核心优势**
- **环境隔离**: 引入 Docker 思维，支持为不同项目指定不同的编译/扫描环境。
- **闭环流程**: 实现了从发现缺陷到申请屏蔽，再到指定人审批的完整闭环。
- **稳定追踪**: 采用缺陷指纹技术，解决了因代码行号变化导致的屏蔽失效问题。

### **下一步建议**
- **生产环境对接**: 目前 Docker 执行和 Git 拉取为模拟逻辑，需根据您的实际 CI 环境（如 Jenkins 或 K8s）进行底层适配。
- **菜单配置**: 请在后台管理系统的“菜单管理”中添加对应的路由链接。

您可以查看上述文件并确认是否满足您的需求。
