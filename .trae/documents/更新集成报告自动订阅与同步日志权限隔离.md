# 实施计划：更新集成报告订阅与同步日志权限

## 1. 后端修改 - 集成报告订阅逻辑
**目标**: 当新的项目配置（Config）加入时，自动为所有活跃用户创建订阅。

**文件**: `backend-django/apps/integration_report/integration_api.py`

**步骤**:
1.  **添加导入**:
    - 导入 `User` 模型: `from core.user.user_model import User`
    - 导入 `IntegrationEmailSubscription` 模型: 在现有 `integration_models` 导入中添加。
2.  **修改 `create_config` 接口**:
    - 在创建 `IntegrationProjectConfig` 对象后，查询所有未删除且激活的用户 (`User.objects.filter(is_deleted=False, is_active=True)`)。
    - 批量创建 `IntegrationEmailSubscription` 对象，关联新配置和每个用户，设置 `enabled=True`。
3.  **修改 `init_configs` 接口**:
    - 在初始化创建配置的逻辑中，同样加入上述批量订阅逻辑，确保通过初始化生成的配置也被全员订阅。

## 2. 后端修改 - 同步日志权限控制
**目标**: 用户在同步日志页面仅能看到自己触发的日志。

**文件**: `backend-django/apps/project_manager/sync_log_api.py`

**步骤**:
1.  **修改 `list_sync_logs` 接口**:
    - 将 `SyncLog.objects.all()` 修改为 `SyncLog.objects.filter(sys_creator=request.auth)`。
    - `request.auth` 在 `GlobalAuth` 下已解析为当前请求的 `User` 对象。
    - 保持原有的 `select_related` 和 `order_by` 逻辑不变。

## 3. 前端修改
**检查**:
- `web/apps/web-ele/src/views/integration-report/` (集成报告)
- `web/apps/web-ele/src/views/project-manager/sync-log/` (同步日志)

**结论**:
- 前端无需修改。
- 集成报告的订阅是后端自动行为。
- 同步日志的过滤完全由后端 API 控制，前端表格组件会自动展示过滤后的数据。
